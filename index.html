<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>azurlane-damage</title>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
    h1 { text-align: center; }
    .container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input { width: 100%; padding: 5px; margin-top: 5px; }
    button { margin-top: 20px; padding: 10px 20px; cursor: pointer; }
    .result { margin-top: 20px; font-size: 1.2em; font-weight: bold; color: #333; }
  </style>
</head>
<body>
  <div class="container">
    <h1>碧蓝航线伤害计算器</h1>

    <label>面板属性（炮击/雷击/航空）</label>
    <input type="number" id="attr" value="500">

    <label>属性效率（默认填100表示100%）</label>
    <input type="number" id="attrEff" value="100">

    <label>武器面板伤害</label>
    <input type="number" id="weaponDmg" value="200">

    <label>武器系数</label>
    <input type="number" step="0.01" id="weaponCoef" value="1">

    <label>武器效率</label>
    <input type="number" step="0.01" id="weaponEff" value="1.0">

    <label>对甲效率</label>
    <input type="number" step="0.01" id="armorEff" value="1.0">

    <label>增伤技能（加算，先相加后转倍率，例如1.1表示+10%）</label>
    <input type="number" step="0.01" id="skillAdd" value="1.0">

    <label>独立增伤（乘算，多个相乘后输入，例如1.15×1.12=1.288）</label>
    <input type="number" step="0.01" id="skillMul" value="1.0">

    <label>敌人debuff（例如1.1表示+10%）</label>
    <input type="number" step="0.01" id="debuff" value="1.0">

    <label>我方等级</label>
    <input type="number" id="myLv" value="100">

    <label>敌方等级</label>
    <input type="number" id="enemyLv" value="100">

    <label>危险海域等级（默认0）</label>
    <input type="number" id="dangerLv" value="0">

    <button onclick="calc()">计算伤害</button>

    <div class="result" id="result"></div>
  </div>

  <script>
    function calc(){
      let attr = parseFloat(document.getElementById('attr').value);
      let attrEff = parseFloat(document.getElementById('attrEff').value)/100;
      let weaponDmg = parseFloat(document.getElementById('weaponDmg').value);
      let weaponCoef = parseFloat(document.getElementById('weaponCoef').value);
      let weaponEff = parseFloat(document.getElementById('weaponEff').value);
      let armorEff = parseFloat(document.getElementById('armorEff').value);
      let skillAdd = parseFloat(document.getElementById('skillAdd').value);
      let skillMul = parseFloat(document.getElementById('skillMul').value);
      let debuff = parseFloat(document.getElementById('debuff').value);
      let myLv = parseFloat(document.getElementById('myLv').value);
      let enemyLv = parseFloat(document.getElementById('enemyLv').value);
      let dangerLv = parseFloat(document.getElementById('dangerLv').value);

      // 等级压制
      let levelCoef = 1 + (myLv - enemyLv + dangerLv) * 0.02;
      if(levelCoef < 0.5) levelCoef = 0.5;
      if(levelCoef > 1.5) levelCoef = 1.5;

      // 基础伤害公式 (面板属性×效率 + 武器伤害)
      let base = (attr * attrEff + weaponDmg)
                * weaponCoef * weaponEff
                * armorEff * skillAdd * debuff * levelCoef * skillMul;

      // 波动范围 -1 ~ +4
      let minDmg = Math.floor(base - 1);
      let maxDmg = Math.floor(base + 4);

      document.getElementById('result').innerHTML = `最终伤害: ${Math.floor(base)}<br>伤害波动范围: ${minDmg} ~ ${maxDmg}`;
    }
  </script>
</body>
</html>

